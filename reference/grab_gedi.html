<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Download and load GEDI data from the Cloud or local cache — grab_gedi • chewie</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Download and load GEDI data from the Cloud or local cache — grab_gedi"><meta name="description" content="Download GEDI data from the NASA Earthdata in hdf5 format,
convert it to parquet format and load it as an arrow dataset."><meta property="og:description" content="Download GEDI data from the NASA Earthdata in hdf5 format,
convert it to parquet format and load it as an arrow dataset."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">chewie</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/gedi-L1B-waveforms.html">GEDI Level 1B Waveforms</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Permian-Global-Research/chewie/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Download and load GEDI data from the Cloud or local cache</h1>
      <small class="dont-index">Source: <a href="https://github.com/Permian-Global-Research/chewie/blob/main/R/chewie-grab.r" class="external-link"><code>R/chewie-grab.r</code></a></small>
      <div class="d-none name"><code>grab_gedi.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Download GEDI data from the NASA Earthdata in hdf5 format,
convert it to parquet format and load it as an arrow dataset.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">grab_gedi</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  timeout <span class="op">=</span> <span class="fl">7200</span>,</span>
<span>  batchsize <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  delete_h5 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  compression <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"chewie.parquet.codec"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A chewie.find.x object.
dataset. See details.</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>A logical indicating whether to show a progress bar.</p></dd>


<dt id="arg-timeout">timeout<a class="anchor" aria-label="anchor" href="#arg-timeout"></a></dt>
<dd><p>A numeric indicating the timeout in seconds.</p></dd>


<dt id="arg-batchsize">batchsize<a class="anchor" aria-label="anchor" href="#arg-batchsize"></a></dt>
<dd><p>A numeric indicating the number of files to download in
parallel. where batchsize is less than the number of files to download, the
files will be downloaded in chunks of batchsize.</p></dd>


<dt id="arg-delete-h-">delete_h5<a class="anchor" aria-label="anchor" href="#arg-delete-h-"></a></dt>
<dd><p>A logical indicating whether to delete the hdf5 file after
conversion to parquet. Default is TRUE. these files are saved in
<code>getOption("chewie.h5.cache")</code>.</p></dd>


<dt id="arg-compression">compression<a class="anchor" aria-label="anchor" href="#arg-compression"></a></dt>
<dd><p>A character vector indicating the compression codec to
use. Default is <code>getOption("chewie.parquet.codec")</code>. see
<code><a href="https://arrow.apache.org/docs/r/reference/write_parquet.html" class="external-link">?arrow::write_parquet</a></code>. must be one of: "zstd", "brotli", "gzip", "snappy",
"bz2", "lz4", "lzo" or "uncompressed".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An arrow_dplyr_query object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function is the main handler for gedi data - it checks the cache to see
if the required GEDI data are already downloaded, and if not, downloads them
from the NASA Earthdata cloud. Once downloaded each file is converted to
parquet format and saved in the cache directory. This saves a huge amount of
disk space and enables dynamic reading and filtering of the returned "open"
arrow dataset.</p>
<p>{chewie} will only cache specific variables made available in the GEDI hdf5
files. This is in part to reduce disk space but also to improve performance
and make working with these data simpler. If you require additional variables
to be cached, please raise an issue on the {chewie} GitHub repository.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>For more information on the GEDI hdf5 files and the variables they contain
see the following links:</p>
<p>1B: <a href="https://lpdaac.usgs.gov/documents/585/gedi_l1b_product_data_dictionary_P003_v1.html" class="external-link">https://lpdaac.usgs.gov/documents/585/gedi_l1b_product_data_dictionary_P003_v1.html</a></p>
<p>2A: <a href="https://lpdaac.usgs.gov/documents/982/gedi_l2a_dictionary_P003_v2.html" class="external-link">https://lpdaac.usgs.gov/documents/982/gedi_l2a_dictionary_P003_v2.html</a></p>
<p>2B: <a href="https://lpdaac.usgs.gov/documents/587/gedi_l2b_dictionary_P001_v1.html" class="external-link">https://lpdaac.usgs.gov/documents/587/gedi_l2b_dictionary_P001_v1.html</a></p>
<p>4A: <a href="https://daac.ornl.gov/GEDI/guides/GEDI_L4A_AGB_Density_V2_1.html" class="external-link">https://daac.ornl.gov/GEDI/guides/GEDI_L4A_AGB_Density_V2_1.html</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># interactive()</span></span></span>
<span class="r-in"><span><span class="va">prairie_creek</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">read_sf</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"geojson"</span>, <span class="st">"prairie-creek.geojson"</span>, package <span class="op">=</span> <span class="st">"chewie"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">prairie_creek_find_2b</span> <span class="op">&lt;-</span> <span class="fu"><a href="chewie-find-gedi.html">find_gedi</a></span><span class="op">(</span><span class="va">prairie_creek</span>,</span></span>
<span class="r-in"><span>  gedi_product <span class="op">=</span> <span class="st">"2B"</span>,</span></span>
<span class="r-in"><span>  date_start <span class="op">=</span> <span class="st">"2022-01-01"</span>, date_end <span class="op">=</span> <span class="st">"2022-04-01"</span>,</span></span>
<span class="r-in"><span>  cache <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">prairie_creek_grab_2b</span> <span class="op">&lt;-</span> <span class="fu">grab_gedi</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">prairie_creek_find_2b</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hugh Graham.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

